# –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å Pydantic ‚úÖ

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –Ω–∞—É—á–∏–ª–∏—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏ RabbitMQ. –¢–µ–ø–µ—Ä—å –ø–æ—Ä–∞ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ—â–Ω–µ–µ! –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –¥–æ–±–∞–≤–∏–º **Pydantic** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å JSON-—Å–æ–æ–±—â–µ–Ω–∏—è —Å —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. –ú—ã —Ç–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–æ–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –¥–≤–µ –æ—á–µ—Ä–µ–¥–∏, —á—Ç–æ–±—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º. –ì–æ—Ç–æ–≤—ã —É–ª—É—á—à–∏—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ? –ü–æ–≥–Ω–∞–ª–∏! üöÄ

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Pydantic? ü§î

–ö–æ–≥–¥–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –±—Ä–æ–∫–µ—Ä–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–µ–≥–∫–æ –ø–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫–∏, –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ –∏–ª–∏ –ø–æ–ª–µ –∏–º–µ–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø. **Pydantic** —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É:

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ** üìã: –í—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç–µ, –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `{ "username": str, "message": str }`).
- **–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** üõ°Ô∏è: –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, FastStream –≤—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É.
- **–£–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥** ‚ú®: –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –∞ –Ω–µ —Å —Å—ã—Ä—ã–º–∏ —Å–ª–æ–≤–∞—Ä—è–º–∏.

–í FastStream Pydantic –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω "–∏–∑ –∫–æ—Ä–æ–±–∫–∏", —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å JSON-—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —É–¥–æ–±–Ω–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π. üòé

## –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚úçÔ∏è

–û–±–Ω–æ–≤–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ `app.py`, —á—Ç–æ–±—ã –æ–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ JSON-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—è–º–∏ `username` –∏ `message` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `output-queue` –∏ `final-queue`. –û—Ç–∫—Ä–æ–π—Ç–µ `app.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∫–æ–¥:

```python linenums="1" title="app.py" hl_lines="7-9 18-19 23-24 29"
--8<-- "src/tutorial/pydantic/app.py"
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?** üîç

- **–ú–æ–¥–µ–ª—å `UserMessage`**: –ö–ª–∞—Å—Å Pydantic —Å –ø–æ–ª—è–º–∏ `username` –∏ `message`. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (`Field`) –¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ –≤ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–æ AsyncAPI.
- **`@broker.subscriber`**: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –Ω–∞ –æ—á–µ—Ä–µ–¥–∏ `input-queue` –∏ `output-queue`.
- **`handle_message`**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç `UserMessage`, –ª–æ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π `UserMessage` —Å `message` –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ –≤ `output-queue` –∏ `final-queue`.
- **`broker.publish`**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ–±–µ –æ—á–µ—Ä–µ–¥–∏, —á—Ç–æ–±—ã –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å (`app.py`) –º–æ–≥ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∞ –≤—Ç–æ—Ä–æ–π (`app2.py`) ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π.
- **`check_result`**: –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É UserMessage –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ `output-queue`, –ø–æ–∫–∞–∑—ã–≤–∞—è, –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ** üåê: –°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `final-queue` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Ç–æ—Ä—ã–º —Å–µ—Ä–≤–∏—Å–æ–º (`app2.py`), –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–∫–∏** üì§  
–í–º–µ—Å—Ç–æ `broker.publish` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@broker.publisher`:

```python
@broker.subscriber("input-queue")
@broker.publisher("output-queue")
@broker.publisher("final-queue")
async def handle_message(data: UserMessage, logger: Logger) -> UserMessage:
    logger.info(f"–ü–æ–ª—É—á–µ–Ω–æ: {data.username} —Å–∫–∞–∑–∞–ª {data.message!r}")
    return UserMessage(username=data.username, message=data.message.upper())
```

–ü–æ—Ä—è–¥–æ–∫ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –≤–∞–∂–µ–Ω: `@broker.subscriber` ‚Äî –≤–Ω–µ—à–Ω–∏–π, `@broker.publisher` ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π, —Ç–∞–∫ –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–∞, –∞ –≤—Ç–æ—Ä–æ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ù–µ—Å–∫–æ–ª—å–∫–æ `@broker.publisher` –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏.

## –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π üì¨

–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Pydantic, –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `send_message.py` –≤ –ø–∞–ø–∫–µ `faststream-tutorial`, —á—Ç–æ–±—ã –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Pydantic:

```python linenums="1" title="send_message.py" hl_lines="7-9 14 18"
--8<-- "src/tutorial/pydantic/send_message.py"
```

**–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?** üîç

- **`UserMessage`**: Pydantic-–º–æ–¥–µ–ª—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –º–æ–¥–µ–ª–∏ –≤ `app.py`, –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –µ—ë –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ–±—â–∏–π –º–æ–¥—É–ª—å).
- **`broker.publish`**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç `UserMessage`, –∫–æ—Ç–æ—Ä—ã–π FastStream –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –≤ JSON `{ "username": "Alice", "message": "Hello" }`.
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `async with` –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

## –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π ‚ñ∂Ô∏è

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ RabbitMQ** (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω):
   ```bash
   docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3-management
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞** –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö:
   - **–î–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (`app.py`)**:
     ```bash
     faststream run app:app
     ```
     –í—ã–≤–æ–¥:
     ```
     INFO     - FastStream app starting...
     INFO     - input-queue  |            - `handle_message` waiting for messages
     INFO     - output-queue |            - `check_result` waiting for messages
     INFO     - FastStream app started successfully! To exit press CTRL+C
     ```

   - **–î–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (`app2.py`)**:
     ```bash
     faststream run app2:app
     ```
     –í—ã–≤–æ–¥:
     ```
     INFO     - FastStream app starting...
     INFO     - final-queue  |            - `final_result` waiting for messages
     INFO     - FastStream app started successfully! To exit press CTRL+C
     ```

3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**:
   ```bash
   python send_message.py
   ```

   **–í—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ `app.py`**:
   ```
   INFO     - input-queue  |            - –ü–æ–ª—É—á–µ–Ω–æ: Alice —Å–∫–∞–∑–∞–ª 'Hello'
   INFO     - output-queue |            - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Alice —Å–∫–∞–∑–∞–ª 'HELLO'
   ```

   **–í—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ `app2.py`**:
   ```
   INFO     - final-queue  |            - –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {"username": "Alice", "message": "HELLO"}
   ```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?** üîÑ  
FastStream –ø–æ–ª—É—á–∏–ª JSON –∏–∑ `input-queue`, –ø—Ä–æ–≤–µ—Ä–∏–ª –µ–≥–æ —á–µ—Ä–µ–∑ Pydantic, –æ–±—Ä–∞–±–æ—Ç–∞–ª —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `handle_message` –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `output-queue` –∏ `final-queue`. –ü–æ–¥–ø–∏—Å—á–∏–∫ `check_result` –æ–±—Ä–∞–±–æ—Ç–∞–ª –¥–∞–Ω–Ω—ã–µ –∏–∑ `output-queue`, –∞ `app2.py` ‚Äî –∏–∑ `final-queue`. –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ üõ°Ô∏è

Pydantic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ JSON. –°–æ–∑–¥–∞–π—Ç–µ `send_message_invalid.py`:

```python linenums="1" title="send_message_invalid.py" hl_lines="7"
--8<-- "src/tutorial/pydantic/send_message_invalid.py"
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ (`app.py` –∏ `app2.py`) –∑–∞–ø—É—â–µ–Ω—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
python send_message_invalid.py
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?** üîç  
–°–æ–æ–±—â–µ–Ω–∏–µ `{ "wrong_field": "Hello" }` –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `UserMessage`, —Ç–∞–∫ –∫–∞–∫ –º–æ–¥–µ–ª—å –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—è `username` –∏ `message`, –æ–±–∞ —Ç–∏–ø–∞ `str`. Pydantic –≤—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –∏ `handle_message` –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ `app.py` –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥ –æ—à–∏–±–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```
ERROR    - input-queue  |            - ValidationError: ...
```

–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `output-queue` –∏–ª–∏ `final-queue`, –ø–æ—ç—Ç–æ–º—É `check_result` –∏ `app2.py` –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∞—Ç. Pydantic –∑–∞—â–∏—â–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö! üõ°Ô∏è

## –®–∞–≥ 5: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ üìö

–ó–∞–∫—Ä–µ–ø–∏—Ç–µ –∑–Ω–∞–Ω–∏—è:

1. –î–æ–±–∞–≤—å—Ç–µ –≤ `UserMessage` –ø–æ–ª–µ `timestamp: datetime`, –æ–±–Ω–æ–≤–∏—Ç–µ `handle_message`, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∞—Ç—å —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É (`datetime.now()`), –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ª–æ–≥–∞—Ö `check_result` –∏ `app2.py`.
2. –ò–∑–º–µ–Ω–∏—Ç–µ `send_message.py`, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å `timestamp`, –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é.
3. (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `message` —Å `min_length=1` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

## –ß—Ç–æ –¥–∞–ª—å—à–µ? üó∫Ô∏è

–í—ã –Ω–∞—É—á–∏–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pydantic –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π! üéâ –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω—ã–º. –í —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±—Ä–æ–∫–µ—Ä–∞. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ [**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**](./testing.md), —á—Ç–æ–±—ã –æ—Å–≤–æ–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è FastStream.

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å, –∑–∞–≥–ª—è–Ω–∏—Ç–µ –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é FastStream](https://faststream.airt.ai/latest/), –ø–∏—à–∏—Ç–µ –≤ [Telegram](https://t.me/python_faststream) –∏–ª–∏ [Discord](https://discord.gg/qFm6aSqq59). –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∫–æ–¥–∏—Ç—å! üöÄ
