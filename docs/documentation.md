# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ üìù

–í—ã —Å–æ–∑–¥–∞–ª–∏, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –∏ —É–ª—É—á—à–∏–ª–∏ —Å–≤–æ—ë FastStream-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ! üéâ –¢–µ–ø–µ—Ä—å –ø–æ—Ä–∞ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ, —á—Ç–æ–±—ã –¥—Ä—É–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–∏–ª–∏ –≤—ã —Å–∞–º–∏ –≤ –±—É–¥—É—â–µ–º) –º–æ–≥–ª–∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. FastStream –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ **AsyncAPI**, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∞—à–∏ –æ—á–µ—Ä–µ–¥–∏, —Ç–æ–ø–∏–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π. –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –Ω–∞—É—á–∏–º—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é. –ì–æ—Ç–æ–≤—ã —Å–¥–µ–ª–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–Ω—è—Ç–Ω—ã–º –¥–ª—è –≤—Å–µ—Ö? –ü–æ–≥–Ω–∞–ª–∏! üöÄ

## –ß—Ç–æ —Ç–∞–∫–æ–µ AsyncAPI? ü§î

**AsyncAPI** ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö API, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å –±—Ä–æ–∫–µ—Ä–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –û–Ω –ø–æ—Ö–æ–∂ –Ω–∞ OpenAPI (–¥–ª—è REST API), –Ω–æ —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Å–∏—Å—Ç–µ–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –æ—á–µ—Ä–µ–¥–∏, —Ç–æ–ø–∏–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è. AsyncAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- –ö–∞–∫–∏–µ **–æ—á–µ—Ä–µ–¥–∏** –∏–ª–∏ **—Ç–æ–ø–∏–∫–∏** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ üì¨.
- –ö–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç **—Å–æ–æ–±—â–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON, –∑–∞–¥–∞–Ω–Ω–∞—è Pydantic) üìã.
- –ö–∞–∫ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–≥—É—Ç **–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è** –∫ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é üîó.

FastStream –¥–µ–ª–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é AsyncAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–æ—Å—Ç–æ–π ‚Äî –±—É–∫–≤–∞–ª—å–Ω–æ –ø–∞—Ä–∞ –∫–æ–º–∞–Ω–¥! üòé

## –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ üìÑ

FastStream –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç CLI-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ (`app.py`), –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—á–µ—Ä–µ–¥–∏ `input-queue` –∏ `output-queue` –∏ –º–æ–¥–µ–ª—å Pydantic `UserMessage`.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø–∞–ø–∫–µ `faststream-tutorial` –∏ –≤–∞—à–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
faststream docs gen app:app
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?** üîç

- `app:app` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –º–æ–¥—É–ª—å `app.py` –∏ –æ–±—ä–µ–∫—Ç `app` (—ç–∫–∑–µ–º–ø–ª—è—Ä `FastStream`).
- –ö–æ–º–∞–Ω–¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (`@broker.subscriber`), –ø–∞–±–ª–∏—à–µ—Ä–æ–≤ (`@broker.publisher`) –∏ –º–æ–¥–µ–ª–∏ Pydantic.
- –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª `asyncapi.json` –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

–û—Ç–∫—Ä–æ–π—Ç–µ `asyncapi.json` –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ. –í—ã —É–≤–∏–¥–∏—Ç–µ JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—É, –æ–ø–∏—Å—ã–≤–∞—é—â—É—é:

- –û—á–µ—Ä–µ–¥–∏ `input-queue` –∏ `output-queue`.
- –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π (`UserMessage` —Å –ø–æ–ª—è–º–∏ `username` –∏ `message`).
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ `examples` –∏ `description` –∏–∑ Pydantic-–º–æ–¥–µ–ª–∏.

## –®–∞–≥ 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ üåê

JSON-—Ñ–∞–π–ª –ø–æ–ª–µ–∑–µ–Ω, –Ω–æ —á–∏—Ç–∞—Ç—å –µ–≥–æ –Ω–µ—É–¥–æ–±–Ω–æ. FastStream –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –∫—Ä–∞—Å–∏–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
faststream docs serve app:app
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?** üîÑ

- FastStream –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç AsyncAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä.
- –°–µ—Ä–≤–µ—Ä –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `broker.start()` –∏–ª–∏ `broker.connect()`, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ RabbitMQ.

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`. –í—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –≥–¥–µ:

- –ü–æ–∫–∞–∑–∞–Ω—ã –æ—á–µ—Ä–µ–¥–∏ `input-queue` –∏ `output-queue` üóÑÔ∏è.
- –û–ø–∏—Å–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (`UserMessage` —Å –ø–æ–ª—è–º–∏ `username` –∏ `message`) üìã.
- –£–∫–∞–∑–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è, –∑–∞–¥–∞–Ω–Ω—ã–µ –≤ Pydantic —á–µ—Ä–µ–∑ `Field` üìú.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–ª–∏–∫–Ω—É—Ç—å –ø–æ –æ—á–µ—Ä–µ–¥—è–º –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±—Ä–æ–∫–µ—Ä–æ–º! üòä

## –®–∞–≥ 3: –£–ª—É—á—à–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úçÔ∏è

–ß—Ç–æ–±—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—ã–ª–∞ –µ—â—ë –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ–µ, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ `app.py`. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥:

```python
from pydantic import BaseModel, Field
from faststream import FastStream, Logger
from faststream.rabbit import RabbitBroker

class UserMessage(BaseModel):
    username: str = Field(..., examples=["Alice"], description="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    message: str = Field(..., examples=["Hello"], description="–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è")

broker = RabbitBroker("amqp://guest:guest@localhost:5672/")
app = FastStream(
    broker,
    title="–ú–æ–µ –ø–µ—Ä–≤–æ–µ FastStream-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
    description="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ RabbitMQ"
)

@broker.subscriber("input-queue")
@broker.publisher("output-queue")
async def handle_message(data: UserMessage, logger: Logger) -> UserMessage:
    logger.info(f"–ü–æ–ª—É—á–µ–Ω–æ: {data.username} —Å–∫–∞–∑–∞–ª '{data.message}'")
    return UserMessage(
        username=data.username,
        message=data.message.upper()
    )
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?** üîç

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `title` –∏ `description` –≤ `FastStream` –¥–æ–±–∞–≤–ª—è—é—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ AsyncAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
- –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, –¥–µ–ª–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–π.

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å–Ω–æ–≤–∞:

```bash
faststream docs gen app:app
faststream docs serve app:app
```

–í `http://localhost:8000` –≤—ã —É–≤–∏–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. üéâ

## –®–∞–≥ 4: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ üìö

–ó–∞–∫—Ä–µ–ø–∏—Ç–µ –∑–Ω–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∑–∞–¥–∞–Ω–∏–π:

1. –î–æ–±–∞–≤—å—Ç–µ –≤ –º–æ–¥–µ–ª—å `UserMessage` –Ω–æ–≤–æ–µ –ø–æ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `timestamp: str`) –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `examples` –∏ `description` –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—è. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫ –æ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.
2. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –≤ `@broker.subscriber` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ `user-input`) –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
3. (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ) –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `version="1.0.0"` –≤ `FastStream` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫ –æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

## –ß—Ç–æ –¥–∞–ª—å—à–µ? üó∫Ô∏è

–í—ã –Ω–∞—É—á–∏–ª–∏—Å—å –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å AsyncAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –≤–∞—à–µ–≥–æ FastStream-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è! üéâ –≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–µ–ª–∏—Ç—å—Å—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —Å –∫–æ–º–∞–Ω–¥–æ–π –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç. –í —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –ø–æ–¥–≤–µ–¥–µ–º –∏—Ç–æ–≥–∏ –∏ —Ä–∞—Å—Å–∫–∞–∂–µ–º, –∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–∑—É—á–µ–Ω–∏–µ FastStream. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ [**–ß—Ç–æ –¥–∞–ª—å—à–µ?**](./next_steps.md), —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ –¥—Ä—É–≥–∏—Ö –±—Ä–æ–∫–µ—Ä–∞—Ö, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ö –∏ —Ä–µ—Å—É—Ä—Å–∞—Ö.

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ [Telegram](https://t.me/python_faststream) –∏–ª–∏ [Discord](https://discord.gg/qFm6aSqq59) —Å–æ–æ–±—â–µ—Å—Ç–≤–∞—Ö FastStream. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∫–æ–¥–∏—Ç—å! üöÄ
